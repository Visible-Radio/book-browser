(this["webpackJsonpbook-browser"]=this["webpackJsonpbook-browser"]||[]).push([[0],{22:function(n,e,t){},27:function(n,e,t){"use strict";t.r(e);var r,i,o,a,s,c,l,d,b=t(3),u=t(1),h=t.n(u),j=t(13),p=t.n(j),f=(t(22),t(2)),x=t(4),g=t(6),m=function(n){if(!isNaN(new Date(n)))return new Date(n);for(var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=n.match(/\d\d\d\d/)[0],r=null,i=0;i<e.length;i++)if(n.toLowerCase().includes(e[i].toLowerCase())){r=e[i];break}return new Date("".concat(r," ").concat("1"," ").concat(t))},O=x.b.button(r||(r=Object(b.a)(["\n  position: relative;\n  width: 2.5rem;\n  height: 2.5rem;\n  margin: 0.75rem;\n  align-self: start;\n  border: none;\n  font-size: 2.5rem;\n  padding: 0;\n  background-color: transparent;\n  transition: all 0.2s;\n\n  &::after, &::before {\n    content: '';\n    display: inline-block;\n    background-color: var(--textCol);\n    position: absolute;\n  }\n\n  // horizontal\n  &::after {\n    top: 16px;\n    left: 3px;\n    width: 2rem;\n    height: 0.4rem;\n  }\n\n  // vertical\n  &::before {\n    top: 3px;\n    left: 16px;\n    width: 0.4rem;\n    height: 2rem;\n    visibility: ",";\n  }\n\n  &:focus {\n    outline: 2px solid var(--textCol);\n  }\n\n  &:hover {\n    cursor: pointer;\n    filter: brightness(2.25);\n    background: none;\n  }\n\n  &:active {\n    transform: scale(0.5);\n  }\n\n"])),(function(n){return n.isOpen?"hidden":"visible"})),v=t(0),y=x.b.div(i||(i=Object(b.a)(["\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  grid-gap: var(--fz);\n  position: relative;\n\n  background-color: var(--backgroundColBright);\n  color: var(--textCol);\n  box-shadow: var(--boxShadow);\n  padding: var(--pad);\n  border-radius: var(--borad);\n\n  min-height: fit-content;\n  margin: 0 0 1rem 0;\n  width: 100%;\n\n  img {\n    width: 150px;\n    max-height: 270px;\n    height: auto;\n    object-fit: cover;\n    box-shadow: var(--boxShadow);\n  }\n\n  .bookWrapper {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n    height: fit-content;\n    max-width: 180px;\n    max-height: 270px;\n  }\n\n  .wrapperColumn {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    h3 {\n      margin-top: 0;\n    }\n  }\n\n  .rightColumn {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  h3 {\n    margin-bottom: 0.25rem;\n  }\n\n  .imagePlaceHolder {\n    width: 150px;\n    height: 225px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ",";\n    color: var(--backgroundCol);\n    font-weight: 700;\n    padding: 0.5rem;\n    font-size: 0.75rem;\n    box-shadow: var(--boxShadow);\n  }\n\n  .expand {\n    position: absolute;\n    padding: 0;\n    margin: 0.375rem 0.375rem 0 0;\n    top: 0;\n    right: 0;\n  }\n\n  .imSad {\n    background-color: black;\n    color: white;\n    border-radius: var(--borad);\n    padding: 1rem;\n    margin-top: 1rem;\n  }\n\n  @media (max-width: 500px) {\n    grid-template-columns: 1fr;\n  }\n"])),(function(n){return n.color})),w=function(n){var e=n.book,t=n.resultNumber,r=Object(u.useState)(!1),i=Object(f.a)(r,2),o=i[0],a=i[1],s=e.title,c=e.author_name,l=e.cover_edition_key,d=e.publish_date,b=e.edition_key,h=l?"https://covers.openlibrary.org/b/olid/".concat(l,"-M.jpg"):null,j=d?Object(g.a)(d).map((function(n){var e=String(n).trim();return{dateString:e,dateValue:m(e)}})).sort((function(n,e){return n.dateValue-e.dateValue})).map((function(n){return n.dateString})):null;return Object(v.jsxs)(y,{color:"rgb(30,40,50)",children:[Object(v.jsxs)("div",{className:"bookWrapper",children:[h&&Object(v.jsx)("img",{src:h,alt:"Cover of the book ".concat(s)}),!h&&Object(v.jsx)("div",{className:"imagePlaceHolder",children:Object(v.jsx)("p",{children:s})})]}),Object(v.jsxs)("ul",{className:"wrapperColumn",children:[Object(v.jsx)("li",{children:Object(v.jsx)("h3",{children:s})}),Object(v.jsx)("li",{children:Object(v.jsx)("p",{children:Array.isArray(c)?c.join(", "):c})}),d&&d.length>1?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsxs)("p",{children:["First publication: ",d&&j[0]]})}),Object(v.jsx)("li",{children:Object(v.jsxs)("p",{children:["Most Recent publication:"," ",d&&j[j.length-1]]})}),d.length>2&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsxs)("p",{children:["This record refers to ",d.length," publication dates. Click + to see them all."]})}),o&&Object(v.jsx)("ul",{children:j.map((function(n,e){return Object(v.jsx)("li",{children:n},e)}))})]})]}):Object(v.jsx)("li",{children:Object(v.jsx)("p",{children:d&&j[0]})}),b&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsxs)("p",{children:["This record refers to ",b.length," edition",b.length>1?"s":"","."]})}),o&&Object(v.jsxs)("ul",{children:[b.map((function(n,e){return Object(v.jsx)("li",{value:"OLID",onClick:function(){return console.log(n)},children:n},e+n)})),Object(v.jsxs)("li",{className:"imSad",children:[Object(v.jsx)("p",{children:"The API endpoint that serves data for specific edition IDs has not set the Access-Control-Allow-Origin CORS header."}),Object(v.jsx)("p",{children:"Without building some middleware I cannot access the data necessary to render cards for specific editions."}),Object(v.jsx)("p",{children:"Try this in the console:"}),Object(v.jsx)("p",{children:Object(v.jsx)("code",{children:'fetch("https://openlibrary.org/api/volumes/brief/olid/OL30597611M.json").then(resp => resp.json()).then(console.log);'})})]})]})]})]}),Object(v.jsxs)("div",{className:"rightColumn",children:[d&&b&&Object(v.jsx)("div",{className:"expand",children:Object(v.jsx)(O,{onClick:function(){a(!o)},isOpen:o,"aria-label":"expand book card"})}),Object(v.jsx)("p",{}),Object(v.jsxs)("p",{children:["Result no. ",t+1]})]})]})},S=x.b.div(o||(o=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  margin: 0;\n  padding: 1rem;\n  overflow-y: scroll;\n\n"]))),k=function(n){var e=n.children;return Object(v.jsx)(S,{children:e})},C=x.b.nav(a||(a=Object(b.a)(["\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n  border-top: 2px solid var(--myGrey);\n  font-size: var(--fz);\n\n  div.pageReference {\n    width: var(--buttonWidth);\n    display: flex;\n    justify-content: center;\n    transform: translateY(-70%);\n    order: var(--orderAssignEnd);\n    width: var(--assignWidth100);\n  }\n\n  span {\n    min-width: max-content;\n  }\n"]))),F=x.b.button(s||(s=Object(b.a)(["\n  ",";\n  border: 2px solid var(--textCol);\n  background-color: var(--backgroundColBright);\n  font-size: var(--fz);\n  font-family: 'Raleway', sans-serif;\n  height: 44px;\n  width: var(--buttonWidth);\n  margin: var(--buttonMargin);\n  border-radius: var(--borad);\n  transition: all 0.25s;\n  box-shadow: var(--boxShadow);\n\n  &:disabled {\n    filter: contrast(0.15) brightness(1.2);\n  }\n\n  &:hover:not(:disabled) {\n    cursor: pointer;\n    background-color: var(--textCol);\n    color: var(--backgroundCol);\n  }\n\n  &:focus {\n    outline: 2px solid var(--textCol);\n    outline-offset: 2px;\n  }\n\n  &:active {\n    ",";\n  }\n"])),(function(n){return n.offset?"transform: translateY(-62%);":null}),(function(n){return n.offset?"transform: translateY(-50%);":"transform: translateY(10%);"})),B=function(n){var e=n.pageJump,t=n.changePage,r=n.currentPage,i=n.pageCount;return Object(v.jsxs)(C,{children:[Object(v.jsx)(F,{offset:"true",value:"start",onClick:e,disabled:0===r&&!0,children:"First"}),Object(v.jsx)(F,{offset:"true",value:-1,onClick:t,disabled:0===r&&!0,children:"Previous"}),Object(v.jsx)("div",{className:"pageReference",children:Object(v.jsxs)("span",{children:["Page ",r+1," of ",i]})}),Object(v.jsx)(F,{offset:"true",value:1,onClick:t,disabled:r===i-1&&!0,children:"Next"}),Object(v.jsx)(F,{offset:"true",value:"end",onClick:e,disabled:r===i-1&&!0,children:"Last"})]})},M=x.b.div(c||(c=Object(b.a)(['\n  background-color: var(--backgroundCol);\n  top: 100%;\n  position: absolute;\n  min-width: 90%;\n  margin: 0 0.5rem;\n  border: 2px solid var(--textCol);\n  box-shadow: var(--boxShadow);\n  padding: var(--pad);\n  border-radius: var(--borad);\n  display: flex;\n  flex-flow: row wrap;\n  z-index: 2;\n\n  form {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n  }\n\n  label {\n    min-width: max-content;\n  }\n\n  div {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  div.dateOptions {\n    border-top: 2px solid var(--textCol);\n    margin: var(--pad) 0;\n    padding: var(--pad) 0;\n\n    p {\n      margin: 0.25rem 0;\n    }\n  }\n\n  input[type="radio"] {\n    width: 2rem;\n    height: 2rem;\n  }\n']))),N=function(n){var e=n.setIsByFirstEdition,t=n.isByFirstEdition,r=n.sortMode,i=n.setSortMode,o=n.sortDirection,a=n.setSortDirection,s=n.setFilterIsOpen,c=n.optionsBtnRef,l=Object(u.useRef)(null),d=function(n){l.current&&l.current.contains(n.target)||c.current&&c.current===n.target||s(!1)};Object(u.useEffect)((function(){return window.addEventListener("mousedown",d),function(){window.removeEventListener("mousedown",d)}}));var b=function(){e(!t)},h=function(n){a(Number(n.target.value)),i("date")};return Object(v.jsxs)(M,{ref:l,children:[Object(v.jsxs)("form",{children:[Object(v.jsx)("h3",{children:"Filter Options"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"radio",name:"filterType",value:"title",id:"byTitle",checked:"title"===r,onChange:function(){i("date"===r?"title":"date")}}),Object(v.jsx)("label",{htmlFor:"byTitle",children:"By title"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"radio",name:"filterType",value:-1,id:"newestFirst",checked:"date"===r&&-1===o,onChange:h}),Object(v.jsx)("label",{htmlFor:"newestFirst",children:"Newest publications first"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"radio",name:"filterType",value:1,id:"oldestFirst",checked:"date"===r&&1===o,onChange:h}),Object(v.jsx)("label",{htmlFor:"filterType",children:"Oldest publications first"})]})]}),"date"===r&&Object(v.jsx)("form",{children:Object(v.jsxs)("div",{className:"dateOptions",children:[Object(v.jsx)("p",{children:"Some books have been published many times."}),Object(v.jsx)("p",{children:"Woud you like to use their oldest publication date or their most recent publication date when sorting?"}),Object(v.jsx)("p",{children:"This can be useful for finding new releases of old books."}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{onChange:b,type:"radio",name:"filterType",value:!1,id:"!isByFirstEdition",checked:!t}),Object(v.jsx)("label",{htmlFor:"filterType",children:"Use their most recent"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{onChange:b,type:"radio",name:"filterType",value:!0,id:"isByFirstEdition",checked:t}),Object(v.jsx)("label",{htmlFor:"filterType",children:"User their oldest"})]})]})})]})},E=x.b.input(l||(l=Object(b.a)(["\n  border: 2px solid var(--textCol);\n  margin: var(--buttonMargin);\n  font-size: 1rem;\n  padding: 0.25rem 0.5rem 0.25rem 0.5rem;\n  border-radius: var(--borad);\n  width: var(--textInputWidth);\n\n  &:focus {\n    outline-offset: 2px;\n    outline: 2px solid var(--textCol);\n  }\n\n  @media (max-width: 500px) {\n    min-height: 44px;\n  }\n"]))),T=function(n){var e=n.onSearchChange,t=n.onSearchSubmit,r=n.searchString,i=n.setSearchString,o=n.setIsByFirstEdition,a=n.isByFirstEdition,s=n.sortDirection,c=n.setSortDirection,l=n.sortMode,d=n.setSortMode,b=Object(u.useState)(!1),h=Object(f.a)(b,2),j=h[0],p=h[1],x="Search for a book",g=Object(u.useState)(x),m=Object(f.a)(g,2),O=m[0],y=m[1],w=Object(u.useRef)(null);return Object(v.jsxs)(C,{children:[Object(v.jsx)(E,{value:r,type:"search",onChange:e,onFocus:function(){i(""),y("")},onBlur:function(){y(x)},placeholder:O}),Object(v.jsx)(F,{onClick:t,children:"Search"}),Object(v.jsx)(F,{onClick:function(){p(!j)},ref:w,children:"Options"}),j&&Object(v.jsx)(N,{setIsByFirstEdition:o,isByFirstEdition:a,sortDirection:s,setSortDirection:c,sortMode:l,setSortMode:d,setFilterIsOpen:p,optionsBtnRef:w})]})},D=function(n){var e=[],t=[];return n.forEach((function(n){n.hasOwnProperty("publish_year")?t.push(n):e.push(n)})),[e,t]},I=t(11),z=t.n(I),W=t(17);var P=x.b.div(d||(d=Object(b.a)(["\n  width: 100vw;\n  height: 100vh;\n  max-width: var(--maxWidth);\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  grid-template-columns: 1fr;\n"])));var R,_=function(){var n=Object(u.useState)([]),e=Object(f.a)(n,2),t=e[0],r=e[1],i=Object(u.useState)(0),o=Object(f.a)(i,2),a=o[0],s=o[1],c=Object(u.useState)(10),l=Object(f.a)(c,1)[0],d=Object(u.useState)(null),b=Object(f.a)(d,2),h=b[0],j=b[1],p=a*l,x=p+l,m=Object(u.useState)("date"),O=Object(f.a)(m,2),y=O[0],S=O[1],C=Object(u.useState)(-1),F=Object(f.a)(C,2),M=F[0],N=F[1],E=Object(u.useState)(!0),I=Object(f.a)(E,2),R=I[0],_=I[1],A=Object(u.useState)("the great gatsby"),L=Object(f.a)(A,2),J=L[0],U=L[1],Y=Object(u.useState)("https://openlibrary.org/search.json?q=the+great+gatsby&limit=100&offset=0"),H=Object(f.a)(Y,2),V=H[0],q=H[1],G=function(n){var e=Object(u.useState)([]),t=Object(f.a)(e,2),r=t[0],i=t[1],o=Object(u.useState)(!0),a=Object(f.a)(o,2),s=a[0],c=a[1];return Object(u.useEffect)((function(){Object(W.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fetch(n).then((function(n){return n.json()}));case 3:t=e.sent,i(t),c(!1);case 6:case"end":return e.stop()}}),e)})))()}),[n]),[r,s]}(V),K=Object(f.a)(G,2),Q=K[0],X=K[1];Object(u.useEffect)((function(){X||(r(Q.docs),j(Math.ceil(Q.docs.length/l)))}),[X,l,Q.docs]);var Z="date"===y?function(n,e,t){var r=D(n),i=Object(f.a)(r,2),o=i[0],a=i[1];return Object(g.a)(a).sort((function(n,r){if(n.publish_year&&r.publish_year){var i=t?0:n.publish_year.length-1,o=t?0:r.publish_year.length-1;return(Number(n.publish_year.sort()[i])-Number(r.publish_year.sort()[o]))*e}return 0})).concat(o)}(t,M,R):function(n){return Object(g.a)(n).sort((function(n,e){var t=n.title.toUpperCase(),r=e.title.toUpperCase();return t<r?-1:t>r?1:0}))}(t);return Object(v.jsxs)(P,{children:[Object(v.jsx)(T,{onSearchChange:function(n){U(n.target.value)},onSearchSubmit:function(){var n=J.trim().split(" ").join("+");q("https://openlibrary.org/search.json?q=".concat(n,"&limit=100&offset=0"))},searchString:J,setSearchString:U,setIsByFirstEdition:_,isByFirstEdition:R,sortDirection:M,setSortDirection:N,sortMode:y,setSortMode:S}),Object(v.jsx)(k,{children:Z.slice(p,x).map((function(n,e){return Object(v.jsx)(w,{resultNumber:e+p,book:n},e)}))}),Object(v.jsx)(B,{pageJump:function(n){var e="start"===n.target.value?0:h-1;s(e)},changePage:function(n){var e=Number(n.target.value);(a<h-1&&1===e||a>0&&-1===e)&&s(a+e)},pageCount:h,currentPage:a})]})},A=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,28)).then((function(e){var t=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;t(n),r(n),i(n),o(n),a(n)}))},L=Object(x.a)(R||(R=Object(b.a)(["\n  :root {\n    --backgroundCol: rgb(220,220,220);\n    --backgroundColBright: rgb(240,240,240);\n    --textCol: rgb(60,60,60);\n    --myGrey: rgb(190,190,190);\n    --boxShadow: 0 0 2px 2px rgba(0,0,0,0.1), 3px 3px 3px 3px rgba(0,0,0,0.2);\n    --pad: 2rem;\n    --borad: 2rem;\n    --maxWidth: 1200px;\n    --fz: 1rem;\n    --buttonWidth: 100px;\n    --buttonMargin: 0.5rem;\n    --textInputWidth: 200px;\n  }\n\n  html, body {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    width: 100vw;\n  }\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  li {\n    list-style: none;\n  }\n\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    background: var(--backgroundCol);\n    color: var(--textCol);\n    font-family: 'Raleway', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    display: flex;\n    justify-content: center;\n  }\n\n  @media screen and (max-width: 500px) {\n    :root {\n      --fz: 0.75rem;\n      --pad: 1rem;\n      --buttonWidth: 70px;\n      --textInputWidth: 170px;\n    }\n  }\n  @media screen and (max-width: 625px) {\n    :root {\n      --buttonMargin: 0rem 0rem 0.375rem 0rem;\n      --orderAssignEnd: 1;\n      --assignWidth100: 100%;\n    }\n  }\n"])));p.a.render(Object(v.jsxs)(h.a.StrictMode,{children:[Object(v.jsx)(L,{}),Object(v.jsx)(_,{})]}),document.getElementById("root")),A()}},[[27,1,2]]]);
//# sourceMappingURL=main.bb87e75f.chunk.js.map