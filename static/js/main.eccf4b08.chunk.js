(this["webpackJsonpbook-browser"]=this["webpackJsonpbook-browser"]||[]).push([[0],{22:function(e,n,t){},23:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var r,i=t(3),o=t(1),a=t.n(o),s=t(13),c=t.n(s),l=(t(22),t(2)),d=(t(23),t(6)),b=t(4);var u,h,j,p,f,x,g=b.b.button(r||(r=Object(i.a)(["\n  position: relative;\n  width: 2.5rem;\n  height: 2.5rem;\n  margin: 0.75rem;\n  align-self: start;\n  border: none;\n  font-size: 2.5rem;\n  padding: 0;\n  background-color: transparent;\n  transition: all 0.2s;\n\n  &::after, &::before {\n    content: '';\n    display: inline-block;\n    background-color: var(--textCol);\n    position: absolute;\n  }\n\n  // horizontal\n  &::after {\n    top: 16px;\n    left: 3px;\n    width: 2rem;\n    height: 0.4rem;\n  }\n\n  // vertical\n  &::before {\n    top: 3px;\n    left: 16px;\n    width: 0.4rem;\n    height: 2rem;\n    visibility: ",";\n  }\n\n  &:focus {\n    outline: 2px solid var(--textCol);\n  }\n\n  &:hover {\n    cursor: pointer;\n    filter: brightness(2.25);\n    background: none;\n  }\n\n  &:active {\n    transform: scale(0.5);\n  }\n\n"])),(function(e){return e.isOpen?"hidden":"visible"})),m=t(0),O=b.b.div(u||(u=Object(i.a)(["\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  grid-gap: 1rem;\n\n  background-color: var(--backgroundColBright);\n  color: var(--textCol);\n  box-shadow: var(--boxShadow);\n  padding: var(--pad);\n  border-radius: var(--borad);\n\n  min-height: fit-content;\n  margin:  0 0 1rem 0;\n  width: 100%;\n\n  img {\n    width: 180px;\n    max-height: 270px;\n    height: auto;\n    object-fit: cover;\n    box-shadow: var(--boxShadow);\n  }\n\n  .bookWrapper {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n    height: fit-content;\n    max-width: 180px;\n    max-height: 270px;\n  }\n\n  .wrapperColumn {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    h3 {\n      margin-top: 0;\n    }\n  }\n\n  .rightColumn {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  p {\n    margin: 0.25rem 0;\n  }\n\n  .imagePlaceHolder {\n    width: 180px;\n    height: 270px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ",";\n    color: var(--backgroundCol);\n    font-weight: 700;\n    padding: 0.5rem;\n    font-size: 0.75rem;\n    box-shadow: var(--boxShadow);\n  }\n\n  .imSad {\n    background-color: black;\n    color: white;\n    border-radius: var(--borad);\n    padding: 1rem;\n    margin-top: 1rem;\n  }\n\n  @media (max-width: 500px) {\n    grid-template-columns: 1fr;\n  }\n"])),(function(e){return e.color})),v=function(e){var n=e.book,t=e.resultNumber,r=Object(o.useState)(!1),i=Object(l.a)(r,2),a=i[0],s=i[1],c=Object(o.useState)(!1),b=Object(l.a)(c,2),u=(b[0],b[1],n.title),h=n.author_name,j=(n.publish_year,n.cover_edition_key),p=n.publish_date,f=n.edition_key,x=j?"https://covers.openlibrary.org/b/olid/".concat(j,"-M.jpg"):null,v=p?Object(d.a)(p).map((function(e){var n=String(e);return{dateString:n,dateValue:Date.parse(n)||Date.parse(n.trim().slice(-4))}})).sort((function(e,n){return e.dateValue-n.dateValue})).map((function(e){return e.dateString})):null;return Object(m.jsxs)(O,{color:"rgb(30,40,50)",children:[Object(m.jsxs)("div",{className:"bookWrapper",children:[x&&Object(m.jsx)("img",{src:x,alt:"Cover of the book ".concat(u)}),!x&&Object(m.jsx)("div",{className:"imagePlaceHolder",children:Object(m.jsx)("p",{children:u})})]}),Object(m.jsxs)("ul",{className:"wrapperColumn",children:[Object(m.jsx)("li",{children:Object(m.jsx)("h3",{children:u})}),Object(m.jsx)("li",{children:Object(m.jsx)("p",{children:Array.isArray(h)?h.join(", "):h})}),p&&p.length>1?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsxs)("p",{children:["First publication: ",p&&v[0]]})}),Object(m.jsx)("li",{children:Object(m.jsxs)("p",{children:["Most Recent publication: ",p&&v[v.length-1]]})}),p.length>2&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsxs)("p",{children:["This record refers to ",p.length," publication dates. Click + to see them all."]})}),a&&Object(m.jsx)("ul",{children:v.map((function(e,n){return Object(m.jsx)("li",{children:e},n)}))})]})]}):Object(m.jsx)("li",{children:Object(m.jsx)("p",{children:p&&v[0]})}),f&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsxs)("p",{children:["This record refers to ",f.length," edition",f.length>1?"s":"","."]})}),a&&Object(m.jsxs)("ul",{children:[f.map((function(e,n){return Object(m.jsx)("li",{value:"OLID",onClick:function(){return console.log(e)},children:e},n+e)})),Object(m.jsxs)("li",{className:"imSad",children:[Object(m.jsx)("p",{children:"The API endpoint that serves data for specific edition IDs has not set the Access-Control-Allow-Origin CORS header."}),Object(m.jsx)("p",{children:"Without building some middleware I cannot access the data necessary to render cards for specific editions."}),Object(m.jsx)("p",{children:"Try this in the console:"}),Object(m.jsx)("p",{children:Object(m.jsx)("code",{children:'fetch("https://openlibrary.org/api/volumes/brief/olid/OL30597611M.json").then(resp => resp.json()).then(console.log);'})})]})]})]})]}),Object(m.jsxs)("div",{className:"rightColumn",children:[p&&f&&Object(m.jsx)(g,{onClick:function(){s(!a)},isOpen:a}),Object(m.jsx)("p",{}),Object(m.jsxs)("p",{children:["Result no. ",t+1]})]})]})},y=b.b.div(h||(h=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  margin: 0;\n  padding: 1rem;\n  overflow-y: scroll;\n\n"]))),w=function(e){var n=e.children;return Object(m.jsx)(y,{children:n})},S=b.b.nav(j||(j=Object(i.a)(["\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n  border-top: 2px solid var(--myGrey);\n\n  div {\n    width: 8rem;\n    display: flex;\n    justify-content: center;\n  }\n\n  span {\n    min-width: max-content;\n  }\n"]))),k=b.b.button(p||(p=Object(i.a)(["\n  ",";\n  border: 2px solid var(--textCol);\n  background-color: var(--backgroundColBright);\n  font-size: 1rem;\n  font-family: 'Raleway', sans-serif;\n  padding: 1rem;\n  margin: 0.5rem;\n  border-radius: var(--borad);\n  transition: all 0.25s;\n  width: 7rem;\n  box-shadow: var(--boxShadow);\n\n  &:disabled {\n    filter: contrast(0.15) brightness(1.2);\n  }\n\n  &:hover:not(:disabled) {\n    cursor: pointer;\n    background-color: var(--textCol);\n    color: var(--backgroundCol);\n  }\n\n  &:focus {\n    outline: 2px solid var(--textCol);\n    outline-offset: 2px;\n  }\n\n  &:active {\n    ",";\n  }\n"])),(function(e){return e.offset?"transform: translateY(-62%);":null}),(function(e){return e.offset?"transform: translateY(-50%);":"transform: translateY(10%);"})),C=function(e){var n=e.pageJump,t=e.changePage,r=e.currentPage,i=e.pageCount;return Object(m.jsxs)(S,{children:[Object(m.jsx)(k,{offset:"true",value:"start",onClick:n,disabled:0===r&&!0,children:"First"}),Object(m.jsx)(k,{offset:"true",value:-1,onClick:t,disabled:0===r&&!0,children:"Previous"}),Object(m.jsx)("div",{children:Object(m.jsxs)("span",{children:["Page ",r+1," of ",i]})}),Object(m.jsx)(k,{offset:"true",value:1,onClick:t,disabled:r===i-1&&!0,children:"Next"}),Object(m.jsx)(k,{offset:"true",value:"end",onClick:n,disabled:r===i-1&&!0,children:"Last"})]})},F=b.b.div(f||(f=Object(i.a)(['\n  background-color: var(--backgroundCol);\n  top: 100%;\n  position: absolute;\n  min-width: 320px;\n  border: 2px solid var(--textCol);\n  box-shadow: var(--boxShadow);\n  padding: var(--pad);\n  border-radius: var(--borad);\n  display: flex;\n  flex-flow: row wrap;\n  z-index: 2;\n\n  form {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n  }\n\n  label {\n    min-width: max-content;\n  }\n\n  div {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  input[type="radio"] {\n    width: 2rem;\n    height: 2rem;\n  }\n']))),B=function(e){var n=e.setIsByFirstEdition,t=e.isByFirstEdition,r=e.sortMode,i=e.setSortMode,a=e.sortDirection,s=e.setSortDirection,c=e.setFilterIsOpen,l=e.optionsBtnRef,d=Object(o.useRef)(null),b=function(e){d.current&&d.current.contains(e.target)||l.current&&l.current===e.target||c(!1)};Object(o.useEffect)((function(){return window.addEventListener("mousedown",b),function(){window.removeEventListener("mousedown",b)}}));var u=function(){n(!t)},h=function(e){s(Number(e.target.value)),i("date")};return Object(m.jsxs)(F,{ref:d,children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("h3",{children:"Filter Options"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"radio",name:"filterType",value:"title",id:"byTitle",checked:"title"===r,onChange:function(){i("date"===r?"title":"date")}}),Object(m.jsx)("label",{htmlFor:"byTitle",children:"By title"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"radio",name:"filterType",value:-1,id:"newestFirst",checked:"date"===r&&-1===a,onChange:h}),Object(m.jsx)("label",{htmlFor:"newestFirst",children:"Newest publications first"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"radio",name:"filterType",value:1,id:"oldestFirst",checked:"date"===r&&1===a,onChange:h}),Object(m.jsx)("label",{htmlFor:"filterType",children:"Oldest publications first"})]})]}),"date"===r&&Object(m.jsx)("form",{children:Object(m.jsxs)("div",{className:"dateOptions",children:[Object(m.jsx)("p",{children:"Some books have been published many times."}),Object(m.jsx)("p",{children:"Woud you like to use their oldest publication date or their most recent publication date when sorting?"}),Object(m.jsx)("p",{children:"This can be useful for finding new releases of old books."}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{onChange:u,type:"radio",name:"filterType",value:!1,id:"!isByFirstEdition",checked:!t}),Object(m.jsx)("label",{htmlFor:"filterType",children:"Use their most recent"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{onChange:u,type:"radio",name:"filterType",value:!0,id:"isByFirstEdition",checked:t}),Object(m.jsx)("label",{htmlFor:"filterType",children:"User their oldest"})]})]})})]})},E=b.b.input(x||(x=Object(i.a)(["\n  border: 2px solid var(--textCol);\n  margin: 0;\n  font-size: 1rem;\n  padding: 0.25rem 0.5rem 0.25rem 0.5rem;\n  border-radius: var(--borad);\n\n  &:focus {\n    outline-offset: 2px;\n    outline: 2px solid var(--textCol);\n  }\n\n  @media (max-width: 500px) {\n    min-height: 44px;\n  }\n"]))),T=function(e){var n=e.onSearchChange,t=e.onSearchSubmit,r=e.searchString,i=e.setSearchString,a=e.setIsByFirstEdition,s=e.isByFirstEdition,c=e.sortDirection,d=e.setSortDirection,b=e.sortMode,u=e.setSortMode,h=Object(o.useState)(!1),j=Object(l.a)(h,2),p=j[0],f=j[1],x=Object(o.useRef)(null);return Object(m.jsxs)(S,{children:[Object(m.jsx)(E,{value:r,type:"search",onChange:n,onFocus:function(){i("")}}),Object(m.jsx)(k,{onClick:t,children:"Search"}),Object(m.jsx)(k,{onClick:function(){f(!p)},ref:x,children:"Options"}),p&&Object(m.jsx)(B,{setIsByFirstEdition:a,isByFirstEdition:s,sortDirection:c,setSortDirection:d,sortMode:b,setSortMode:u,setFilterIsOpen:f,optionsBtnRef:x})]})},N=function(e){var n=[],t=[];return e.forEach((function(e){e.hasOwnProperty("publish_year")?t.push(e):n.push(e)})),[n,t]},D=t(11),M=t.n(D),I=t(17);var _,P,R=function(e){var n=e.AppStyles,t=Object(o.useState)([]),r=Object(l.a)(t,2),i=r[0],a=r[1],s=Object(o.useState)(0),c=Object(l.a)(s,2),b=c[0],u=c[1],h=Object(o.useState)(10),j=Object(l.a)(h,1)[0],p=Object(o.useState)(null),f=Object(l.a)(p,2),x=f[0],g=f[1],O=b*j,y=O+j,S=Object(o.useState)("date"),k=Object(l.a)(S,2),F=k[0],B=k[1],E=Object(o.useState)(-1),D=Object(l.a)(E,2),_=D[0],P=D[1],R=Object(o.useState)(!0),z=Object(l.a)(R,2),A=z[0],L=z[1],U=Object(o.useState)("the great gatsby"),W=Object(l.a)(U,2),J=W[0],H=W[1],V=Object(o.useState)("https://openlibrary.org/search.json?q=the+great+gatsby&limit=100&offset=0"),Y=Object(l.a)(V,2),q=Y[0],G=Y[1],K=function(e){var n=Object(o.useState)([]),t=Object(l.a)(n,2),r=t[0],i=t[1],a=Object(o.useState)(!0),s=Object(l.a)(a,2),c=s[0],d=s[1];return Object(o.useEffect)((function(){Object(I.a)(M.a.mark((function n(){var t;return M.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.next=3,fetch(e).then((function(e){return e.json()}));case 3:t=n.sent,i(t),d(!1);case 6:case"end":return n.stop()}}),n)})))()}),[e]),[r,c]}(q),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1];Object(o.useEffect)((function(){Z||(a(X.docs),g(Math.ceil(X.docs.length/j)))}),[Z,j,X.docs]);var $="date"===F?function(e,n,t){var r=N(e),i=Object(l.a)(r,2),o=i[0],a=i[1];return Object(d.a)(a).sort((function(e,r){if(e.publish_year&&r.publish_year){var i=t?0:e.publish_year.length-1,o=t?0:r.publish_year.length-1;return(Number(e.publish_year.sort()[i])-Number(r.publish_year.sort()[o]))*n}return 0})).concat(o)}(i,_,A):function(e){return Object(d.a)(e).sort((function(e,n){var t=e.title.toUpperCase(),r=n.title.toUpperCase();return t<r?-1:t>r?1:0}))}(i);return Object(m.jsxs)(n,{children:[Object(m.jsx)(T,{onSearchChange:function(e){H(e.target.value)},onSearchSubmit:function(){var e=J.trim().split(" ").join("+");G("https://openlibrary.org/search.json?q=".concat(e,"&limit=100&offset=0"))},searchString:J,setSearchString:H,setIsByFirstEdition:L,isByFirstEdition:A,sortDirection:_,setSortDirection:P,sortMode:F,setSortMode:B}),Object(m.jsx)(w,{children:$.slice(O,y).map((function(e,n){return Object(m.jsx)(v,{resultNumber:n+O,book:e},n)}))}),Object(m.jsx)(C,{pageJump:function(e){var n="start"===e.target.value?0:x-1;u(n)},changePage:function(e){var n=Number(e.target.value);(b<x-1&&1===n||b>0&&-1===n)&&u(b+n)},pageCount:x,currentPage:b})]})},z=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,29)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),o(e),a(e)}))},A=Object(b.a)(_||(_=Object(i.a)(["\n  :root {\n    --backgroundCol: rgb(220,220,220);\n    --backgroundColBright: rgb(240,240,240);\n    --textCol: rgb(60,60,60);\n    --myGrey: rgb(190,190,190);\n    --boxShadow: 0 0 2px 2px rgba(0,0,0,0.1), 3px 3px 3px 3px rgba(0,0,0,0.2);\n    --pad: 2rem;\n    --borad: 2rem;\n    --maxWidth: 1200px;\n  }\n\n  html, body {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    width: 100vw;\n  }\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  li {\n    list-style: none;\n  }\n\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    background: var(--backgroundCol);\n    color: var(--textCol);\n    font-family: 'Raleway', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    display: flex;\n    justify-content: center;\n  }\n"]))),L=b.b.div(P||(P=Object(i.a)(["\n  width: 100vw;\n  height: 100vh;\n  max-width: var(--maxWidth);\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  grid-template-columns: 1fr;\n"])));c.a.render(Object(m.jsxs)(a.a.StrictMode,{children:[Object(m.jsx)(A,{}),Object(m.jsx)(R,{AppStyles:L})]}),document.getElementById("root")),z()}},[[28,1,2]]]);
//# sourceMappingURL=main.eccf4b08.chunk.js.map