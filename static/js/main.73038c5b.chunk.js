(this["webpackJsonpbook-browser"]=this["webpackJsonpbook-browser"]||[]).push([[0],{22:function(n,e,t){},27:function(n,e,t){"use strict";t.r(e);var r,i,o,a,s,c,l,d=t(3),b=t(1),u=t.n(b),h=t(13),j=t.n(h),p=(t(22),t(2)),f=t(6),x=t(4),g=function(n){if(!isNaN(new Date(n)))return new Date(n);for(var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=n.match(/\d\d\d\d/)[0],r=null,i=0;i<e.length;i++)if(n.toLowerCase().includes(e[i].toLowerCase())){r=e[i];break}return new Date("".concat(r," ").concat("1"," ").concat(t))},m=x.b.button(r||(r=Object(d.a)(["\n  position: relative;\n  width: 2.5rem;\n  height: 2.5rem;\n  margin: 0.75rem;\n  align-self: start;\n  border: none;\n  font-size: 2.5rem;\n  padding: 0;\n  background-color: transparent;\n  transition: all 0.2s;\n\n  &::after, &::before {\n    content: '';\n    display: inline-block;\n    background-color: var(--textCol);\n    position: absolute;\n  }\n\n  // horizontal\n  &::after {\n    top: 16px;\n    left: 3px;\n    width: 2rem;\n    height: 0.4rem;\n  }\n\n  // vertical\n  &::before {\n    top: 3px;\n    left: 16px;\n    width: 0.4rem;\n    height: 2rem;\n    visibility: ",";\n  }\n\n  &:focus {\n    outline: 2px solid var(--textCol);\n  }\n\n  &:hover {\n    cursor: pointer;\n    filter: brightness(2.25);\n    background: none;\n  }\n\n  &:active {\n    transform: scale(0.5);\n  }\n\n"])),(function(n){return n.isOpen?"hidden":"visible"})),O=t(0),v=x.b.div(i||(i=Object(d.a)(["\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  grid-gap: var(--fz);\n  position: relative;\n\n  background-color: var(--backgroundColBright);\n  color: var(--textCol);\n  box-shadow: var(--boxShadow);\n  padding: var(--pad);\n  border-radius: var(--borad);\n\n  min-height: fit-content;\n  margin: 0 0 1rem 0;\n  width: 100%;\n\n  img {\n    width: 150px;\n    max-height: 270px;\n    height: auto;\n    object-fit: cover;\n    box-shadow: var(--boxShadow);\n  }\n\n  .bookWrapper {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n    height: fit-content;\n    max-width: 180px;\n    max-height: 270px;\n  }\n\n  .wrapperColumn {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    h3 {\n      margin-top: 0;\n    }\n  }\n\n  .rightColumn {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  h3 {\n    margin-bottom: 0.25rem;\n  }\n\n  .imagePlaceHolder {\n    width: 150px;\n    height: 225px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ",";\n    color: var(--backgroundCol);\n    font-weight: 700;\n    padding: 0.5rem;\n    font-size: 0.75rem;\n    box-shadow: var(--boxShadow);\n  }\n\n  .expand {\n    position: absolute;\n    padding: 0;\n    margin: 0.375rem 0.375rem 0 0;\n    top: 0;\n    right: 0;\n  }\n\n  .imSad {\n    background-color: black;\n    color: white;\n    border-radius: var(--borad);\n    padding: 1rem;\n    margin-top: 1rem;\n  }\n\n  @media (max-width: 500px) {\n    grid-template-columns: 1fr;\n  }\n"])),(function(n){return n.color})),y=function(n){var e=n.book,t=n.resultNumber,r=Object(b.useState)(!1),i=Object(p.a)(r,2),o=i[0],a=i[1],s=e.title,c=e.author_name,l=e.cover_edition_key,d=e.publish_date,u=e.edition_key,h=l?"https://covers.openlibrary.org/b/olid/".concat(l,"-M.jpg"):null,j=d?Object(f.a)(d).map((function(n){var e=String(n).trim();return{dateString:e,dateValue:g(e)}})).sort((function(n,e){return n.dateValue-e.dateValue})).map((function(n){return n.dateString})):null;return Object(O.jsxs)(v,{color:"rgb(30,40,50)",children:[Object(O.jsxs)("div",{className:"bookWrapper",children:[h&&Object(O.jsx)("img",{src:h,alt:"Cover of the book ".concat(s)}),!h&&Object(O.jsx)("div",{className:"imagePlaceHolder",children:Object(O.jsx)("p",{children:s})})]}),Object(O.jsxs)("ul",{className:"wrapperColumn",children:[Object(O.jsx)("li",{children:Object(O.jsx)("h3",{children:s})}),Object(O.jsx)("li",{children:Object(O.jsx)("p",{children:Array.isArray(c)?c.join(", "):c})}),d&&d.length>1?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsxs)("p",{children:["First publication: ",d&&j[0]]})}),Object(O.jsx)("li",{children:Object(O.jsxs)("p",{children:["Most Recent publication:"," ",d&&j[j.length-1]]})}),d.length>2&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsxs)("p",{children:["This record refers to ",d.length," publication dates. Click + to see them all."]})}),o&&Object(O.jsx)("ul",{children:j.map((function(n,e){return Object(O.jsx)("li",{children:n},e)}))})]})]}):Object(O.jsx)("li",{children:Object(O.jsx)("p",{children:d&&j[0]})}),u&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsxs)("p",{children:["This record refers to ",u.length," edition",u.length>1?"s":"","."]})}),o&&Object(O.jsxs)("ul",{children:[u.map((function(n,e){return Object(O.jsx)("li",{value:"OLID",onClick:function(){return console.log(n)},children:n},e+n)})),Object(O.jsxs)("li",{className:"imSad",children:[Object(O.jsx)("p",{children:"The API endpoint that serves data for specific edition IDs has not set the Access-Control-Allow-Origin CORS header."}),Object(O.jsx)("p",{children:"Without building some middleware I cannot access the data necessary to render cards for specific editions."}),Object(O.jsx)("p",{children:"Try this in the console:"}),Object(O.jsx)("p",{children:Object(O.jsx)("code",{children:'fetch("https://openlibrary.org/api/volumes/brief/olid/OL30597611M.json").then(resp => resp.json()).then(console.log);'})})]})]})]})]}),Object(O.jsxs)("div",{className:"rightColumn",children:[d&&u&&Object(O.jsx)("div",{className:"expand",children:Object(O.jsx)(m,{onClick:function(){a(!o)},isOpen:o})}),Object(O.jsx)("p",{}),Object(O.jsxs)("p",{children:["Result no. ",t+1]})]})]})},w=x.b.div(o||(o=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  margin: 0;\n  padding: 1rem;\n  overflow-y: scroll;\n\n"]))),S=function(n){var e=n.children;return Object(O.jsx)(w,{children:e})},C=x.b.nav(a||(a=Object(d.a)(["\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n  border-top: 2px solid var(--myGrey);\n  font-size: var(--fz);\n\n  div.pageReference {\n    width: var(--buttonWidth);\n    display: flex;\n    justify-content: center;\n    transform: translateY(-70%);\n    order: var(--orderAssignEnd);\n    width: var(--assignWidth100);\n  }\n\n  span {\n    min-width: max-content;\n  }\n"]))),k=x.b.button(s||(s=Object(d.a)(["\n  ",";\n  border: 2px solid var(--textCol);\n  background-color: var(--backgroundColBright);\n  font-size: var(--fz);\n  font-family: 'Raleway', sans-serif;\n  height: 44px;\n  width: var(--buttonWidth);\n  margin: var(--buttonMargin);\n  border-radius: var(--borad);\n  transition: all 0.25s;\n  box-shadow: var(--boxShadow);\n\n  &:disabled {\n    filter: contrast(0.15) brightness(1.2);\n  }\n\n  &:hover:not(:disabled) {\n    cursor: pointer;\n    background-color: var(--textCol);\n    color: var(--backgroundCol);\n  }\n\n  &:focus {\n    outline: 2px solid var(--textCol);\n    outline-offset: 2px;\n  }\n\n  &:active {\n    ",";\n  }\n"])),(function(n){return n.offset?"transform: translateY(-62%);":null}),(function(n){return n.offset?"transform: translateY(-50%);":"transform: translateY(10%);"})),F=function(n){var e=n.pageJump,t=n.changePage,r=n.currentPage,i=n.pageCount;return Object(O.jsxs)(C,{children:[Object(O.jsx)(k,{offset:"true",value:"start",onClick:e,disabled:0===r&&!0,children:"First"}),Object(O.jsx)(k,{offset:"true",value:-1,onClick:t,disabled:0===r&&!0,children:"Previous"}),Object(O.jsx)("div",{className:"pageReference",children:Object(O.jsxs)("span",{children:["Page ",r+1," of ",i]})}),Object(O.jsx)(k,{offset:"true",value:1,onClick:t,disabled:r===i-1&&!0,children:"Next"}),Object(O.jsx)(k,{offset:"true",value:"end",onClick:e,disabled:r===i-1&&!0,children:"Last"})]})},B=x.b.div(c||(c=Object(d.a)(['\n  background-color: var(--backgroundCol);\n  top: 100%;\n  position: absolute;\n  min-width: 90%;\n  margin: 0 0.5rem;\n  border: 2px solid var(--textCol);\n  box-shadow: var(--boxShadow);\n  padding: var(--pad);\n  border-radius: var(--borad);\n  display: flex;\n  flex-flow: row wrap;\n  z-index: 2;\n\n  form {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n  }\n\n  label {\n    min-width: max-content;\n  }\n\n  div {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  div.dateOptions {\n    border-top: 2px solid var(--textCol);\n    margin: var(--pad) 0;\n    padding: var(--pad) 0;\n\n    p {\n      margin: 0.25rem 0;\n    }\n  }\n\n  input[type="radio"] {\n    width: 2rem;\n    height: 2rem;\n  }\n']))),M=function(n){var e=n.setIsByFirstEdition,t=n.isByFirstEdition,r=n.sortMode,i=n.setSortMode,o=n.sortDirection,a=n.setSortDirection,s=n.setFilterIsOpen,c=n.optionsBtnRef,l=Object(b.useRef)(null),d=function(n){l.current&&l.current.contains(n.target)||c.current&&c.current===n.target||s(!1)};Object(b.useEffect)((function(){return window.addEventListener("mousedown",d),function(){window.removeEventListener("mousedown",d)}}));var u=function(){e(!t)},h=function(n){a(Number(n.target.value)),i("date")};return Object(O.jsxs)(B,{ref:l,children:[Object(O.jsxs)("form",{children:[Object(O.jsx)("h3",{children:"Filter Options"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"radio",name:"filterType",value:"title",id:"byTitle",checked:"title"===r,onChange:function(){i("date"===r?"title":"date")}}),Object(O.jsx)("label",{htmlFor:"byTitle",children:"By title"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"radio",name:"filterType",value:-1,id:"newestFirst",checked:"date"===r&&-1===o,onChange:h}),Object(O.jsx)("label",{htmlFor:"newestFirst",children:"Newest publications first"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"radio",name:"filterType",value:1,id:"oldestFirst",checked:"date"===r&&1===o,onChange:h}),Object(O.jsx)("label",{htmlFor:"filterType",children:"Oldest publications first"})]})]}),"date"===r&&Object(O.jsx)("form",{children:Object(O.jsxs)("div",{className:"dateOptions",children:[Object(O.jsx)("p",{children:"Some books have been published many times."}),Object(O.jsx)("p",{children:"Woud you like to use their oldest publication date or their most recent publication date when sorting?"}),Object(O.jsx)("p",{children:"This can be useful for finding new releases of old books."}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{onChange:u,type:"radio",name:"filterType",value:!1,id:"!isByFirstEdition",checked:!t}),Object(O.jsx)("label",{htmlFor:"filterType",children:"Use their most recent"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{onChange:u,type:"radio",name:"filterType",value:!0,id:"isByFirstEdition",checked:t}),Object(O.jsx)("label",{htmlFor:"filterType",children:"User their oldest"})]})]})})]})},N=x.b.input(l||(l=Object(d.a)(["\n  border: 2px solid var(--textCol);\n  margin: var(--buttonMargin);\n  font-size: 1rem;\n  padding: 0.25rem 0.5rem 0.25rem 0.5rem;\n  border-radius: var(--borad);\n  width: var(--textInputWidth);\n\n  &:focus {\n    outline-offset: 2px;\n    outline: 2px solid var(--textCol);\n  }\n\n  @media (max-width: 500px) {\n    min-height: 44px;\n  }\n"]))),E=function(n){var e=n.onSearchChange,t=n.onSearchSubmit,r=n.searchString,i=n.setSearchString,o=n.setIsByFirstEdition,a=n.isByFirstEdition,s=n.sortDirection,c=n.setSortDirection,l=n.sortMode,d=n.setSortMode,u=Object(b.useState)(!1),h=Object(p.a)(u,2),j=h[0],f=h[1],x="Search for a book",g=Object(b.useState)(x),m=Object(p.a)(g,2),v=m[0],y=m[1],w=Object(b.useRef)(null);return Object(O.jsxs)(C,{children:[Object(O.jsx)(N,{value:r,type:"search",onChange:e,onFocus:function(){i(""),y("")},onBlur:function(){y(x)},placeholder:v}),Object(O.jsx)(k,{onClick:t,children:"Search"}),Object(O.jsx)(k,{onClick:function(){f(!j)},ref:w,children:"Options"}),j&&Object(O.jsx)(M,{setIsByFirstEdition:o,isByFirstEdition:a,sortDirection:s,setSortDirection:c,sortMode:l,setSortMode:d,setFilterIsOpen:f,optionsBtnRef:w})]})},T=function(n){var e=[],t=[];return n.forEach((function(n){n.hasOwnProperty("publish_year")?t.push(n):e.push(n)})),[e,t]},D=t(11),I=t.n(D),z=t(17);var W,P,R=function(n){var e=n.AppStyles,t=Object(b.useState)([]),r=Object(p.a)(t,2),i=r[0],o=r[1],a=Object(b.useState)(0),s=Object(p.a)(a,2),c=s[0],l=s[1],d=Object(b.useState)(10),u=Object(p.a)(d,1)[0],h=Object(b.useState)(null),j=Object(p.a)(h,2),x=j[0],g=j[1],m=c*u,v=m+u,w=Object(b.useState)("date"),C=Object(p.a)(w,2),k=C[0],B=C[1],M=Object(b.useState)(-1),N=Object(p.a)(M,2),D=N[0],W=N[1],P=Object(b.useState)(!0),R=Object(p.a)(P,2),_=R[0],A=R[1],L=Object(b.useState)("the great gatsby"),J=Object(p.a)(L,2),U=J[0],Y=J[1],H=Object(b.useState)("https://openlibrary.org/search.json?q=the+great+gatsby&limit=100&offset=0"),V=Object(p.a)(H,2),q=V[0],G=V[1],K=function(n){var e=Object(b.useState)([]),t=Object(p.a)(e,2),r=t[0],i=t[1],o=Object(b.useState)(!0),a=Object(p.a)(o,2),s=a[0],c=a[1];return Object(b.useEffect)((function(){Object(z.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fetch(n).then((function(n){return n.json()}));case 3:t=e.sent,i(t),c(!1);case 6:case"end":return e.stop()}}),e)})))()}),[n]),[r,s]}(q),Q=Object(p.a)(K,2),X=Q[0],Z=Q[1];Object(b.useEffect)((function(){Z||(o(X.docs),g(Math.ceil(X.docs.length/u)))}),[Z,u,X.docs]);var $="date"===k?function(n,e,t){var r=T(n),i=Object(p.a)(r,2),o=i[0],a=i[1];return Object(f.a)(a).sort((function(n,r){if(n.publish_year&&r.publish_year){var i=t?0:n.publish_year.length-1,o=t?0:r.publish_year.length-1;return(Number(n.publish_year.sort()[i])-Number(r.publish_year.sort()[o]))*e}return 0})).concat(o)}(i,D,_):function(n){return Object(f.a)(n).sort((function(n,e){var t=n.title.toUpperCase(),r=e.title.toUpperCase();return t<r?-1:t>r?1:0}))}(i);return Object(O.jsxs)(e,{children:[Object(O.jsx)(E,{onSearchChange:function(n){Y(n.target.value)},onSearchSubmit:function(){var n=U.trim().split(" ").join("+");G("https://openlibrary.org/search.json?q=".concat(n,"&limit=100&offset=0"))},searchString:U,setSearchString:Y,setIsByFirstEdition:A,isByFirstEdition:_,sortDirection:D,setSortDirection:W,sortMode:k,setSortMode:B}),Object(O.jsx)(S,{children:$.slice(m,v).map((function(n,e){return Object(O.jsx)(y,{resultNumber:e+m,book:n},e)}))}),Object(O.jsx)(F,{pageJump:function(n){var e="start"===n.target.value?0:x-1;l(e)},changePage:function(n){var e=Number(n.target.value);(c<x-1&&1===e||c>0&&-1===e)&&l(c+e)},pageCount:x,currentPage:c})]})},_=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,28)).then((function(e){var t=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;t(n),r(n),i(n),o(n),a(n)}))},A=Object(x.a)(W||(W=Object(d.a)(["\n  :root {\n    --backgroundCol: rgb(220,220,220);\n    --backgroundColBright: rgb(240,240,240);\n    --textCol: rgb(60,60,60);\n    --myGrey: rgb(190,190,190);\n    --boxShadow: 0 0 2px 2px rgba(0,0,0,0.1), 3px 3px 3px 3px rgba(0,0,0,0.2);\n    --pad: 2rem;\n    --borad: 2rem;\n    --maxWidth: 1200px;\n    --fz: 1rem;\n    --buttonWidth: 100px;\n    --buttonMargin: 0.5rem;\n    --textInputWidth: 200px;\n  }\n\n  html, body {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    width: 100vw;\n  }\n\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  li {\n    list-style: none;\n  }\n\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    background: var(--backgroundCol);\n    color: var(--textCol);\n    font-family: 'Raleway', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    display: flex;\n    justify-content: center;\n  }\n\n  @media screen and (max-width: 500px) {\n    :root {\n      --fz: 0.75rem;\n      --pad: 1rem;\n      --buttonWidth: 70px;\n      --textInputWidth: 170px;\n    }\n  }\n  @media screen and (max-width: 625px) {\n    :root {\n      --buttonMargin: 0rem 0rem 0.375rem 0rem;\n      --orderAssignEnd: 1;\n      --assignWidth100: 100%;\n    }\n  }\n"]))),L=x.b.div(P||(P=Object(d.a)(["\n  width: 100vw;\n  height: 100vh;\n  max-width: var(--maxWidth);\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  grid-template-columns: 1fr;\n"])));j.a.render(Object(O.jsxs)(u.a.StrictMode,{children:[Object(O.jsx)(A,{}),Object(O.jsx)(R,{AppStyles:L})]}),document.getElementById("root")),_()}},[[27,1,2]]]);
//# sourceMappingURL=main.73038c5b.chunk.js.map